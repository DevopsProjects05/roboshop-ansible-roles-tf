- name: disable current version of mysql
  ansible.builtin.command: dnf module disable mysql -y

- name: setup mysql5.7 repo
  ansible.builtin.copy:
    src: mysql.repo
    dest: /etc/yum.repos.d/mysql.repo

- name: install mysql server
  ansible.builtin.package:
    name: mysql-community-server
    state: present

- name: start and enable mysql
  ansible.builtin.service:
    name: mysqld
    state: started
    enabled: yes

- name: setup root password
  ansible.builtin.command: mysql_secure_installation --set-root-pass RoboShop@1


# - name: disable current version of mysql
#   ansible.builtin.command: dnf module disable mysql -y

# - name: setup mysql5.7 repo
#   ansible.builtin.copy:
#     src: mysql.repo
#     dest: /etc/yum.repos.d/mysql.repo

# - name: install mysql server
#   ansible.builtin.dnf:
#     name: mysql-server
#     state: installed

# - name: start mysql server
#   ansible.builtin.service:
#     name: mysqld
#     state: started
#     enabled: yes

# # - name: package installations
# #   ansible.builtin.yum:
# #     # yum install pip3
# #     name: python3-pip
# #     state: present
    

# # - name: install boto3 and botocore
# #   ansible.builtin.pip:
# #     name: "{{ item }}"
# #     executable: pip3
# #   loop:
# #   # - packaging
# #   - boto3
# #   - botocore

# - name: setp root password
#   ansible.builtin.command: mysql_secure_installation --set-root-pass Roboshop@1